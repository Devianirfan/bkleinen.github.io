---
title: Email Collector for LSF
author: kleinen
weight: 30
menu:
  main:
    parent: 'misc'
---
<script>

  function convert(){
    const source = document.getElementById("lsfstuff").value;
    const arrayOfLines = source.match(/[^\r\n]+/g);
    // old : /.*(\d{6})@htw-berlin.de.*/
    const matchRegEx = /.*\d{6}\s*([^\t]*?)\s*\t\s*([^\t]*?)\s*s0(\d{6})@htw-berlin.de.*/
    const replaceString = "$2 $1 <s0$3@htw-berlin.de>";

    // for longer list:
    //const matchRegEx = /^(\d{6})\s*([^\t]*?)\s\s(.*?)\s\s.*/;
    //const replaceString = "$2 $3 <s0$1@htw-berlin.de>";

    //let matchRegEx = document.getElementById("regex-select").value;
    //matchRegEx = new RegExp(matchRegEx);
    //const replaceString = document.getElementById("replace-select").value;


    const yesNo = { 'student' : [], 'ignore' : []};
    const reduceFunct = (acc,line) => {
                     acc[line.match(matchRegEx) ? 'student' : 'ignore'].push(line);
                     return acc;
                   }
    arrayOfLines.reduce( reduceFunct,yesNo);
        console.log(yesNo.student)
    const emails = yesNo.student.map(x => x.replace(matchRegEx, replaceString));
    console.log(emails)
    const emailSet = new Set(emails);
    const emailsSingle = Array.from(emailSet).sort();
    document.getElementById("emailarea").innerHTML = emailsSingle.join("\n");
    document.getElementById("number_emails").innerHTML = arrayOfLines.length + " lines read, "+emailsSingle.length + " unique addresses";
    document.getElementById("ignored").innerHTML = yesNo.ignore.join("\n");
    document.getElementById("ignoredNumber").innerHTML = yesNo.ignore.length + " ignored lines"
  }
</script>


<h2>Email Collector for LSF</h2>

<div class="container-fluid">
  <div class="row">
    <div class="col" >
      <!--
      <div class="float-right">


        <div class="form-check">
          <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
          <label class="form-check-label" for="flexRadioDefault1">
            Default radio
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
          <label class="form-check-label" for="flexRadioDefault2">
            Default checked radio
          </label>
        </div>

        <div>
          <div class="mb-3">
            <label for="regex" class="form-label">RegEx</label>
            <input type="text" list="regex-list" list class="form-control" id="regex-select" aria-describedby="regex">
            <div id="regexHelp" class="form-text">Select or enter the regex. <a href="">try out here.</a></div>
            <datalist id="regex-list">
                <option value=".*\d{6}\s*([^\t]*?)\s*\t\s*([^\t]*?)\s*s0(\d{6})@htw-berlin.de.*">
                <option selected value="^(\d{6})\s*([^\t]*?)\s\s(.*?)\s\s">
            </datalist>

            <input type="text" list="replace-list" list class="form-control" id="replace-select" aria-describedby="regex">

            <datalist id="replace-list">
                <option value="$2 $1 <s0$3@htw-berlin.de>">
                <option selected value="$2 $3 <s0$1@htw-berlin.de>">
            </datalist>
          </div>

                </div>
              </div>
-->
          <button  onclick="convert()" class="btn btn-primary">Show Email Adresses</button>


        </div>


    <div class="col">
      <div id ="ignoredNumber">ignored lines</div>
         <textarea id = "ignored" cols="60" rows="2"></textarea>
    </div>
  </div>

  <div class="row">
    <div class="col-6">
        <div>Paste list from LSF here</div>
      <textarea id = "lsfstuff" cols="60" rows="100" onchange="convert()" ></textarea>
    </div>
    <div class="col-6">
      <div id = "number_emails">here be dragons</div>
         <textarea id = "emailarea" cols="60" rows="100"></textarea>
    </div>
  </div>


</div>



Links Liste aus "Spezielle Information (Namenliste mit Anmeldungen und Ablehnungen)"pasten.
<a href="#anleitung">mehr info unten.</a>
  <table>
    <tr>
    <tr valign="top">
      <td>


      </td>

      <td>
      </td>
    </tr>
  </table>
<hr/>
<h2 id ="anleitung">Anleitung</h2>
<p>In die Box links den Inhalt der Tabelle "Spezielle Information (Namenliste mit Anmeldungen und Ablehnungen)"
  pasten.<br/> Weg dorthin: Unten auf "Anmeldezahlen" und dann "Spezielle Information" klicken.</p>
  <p><img src="{{ site.BaseURL }}/misc/images/anmeldezahlen.png" alt="anmeldezahlen.png">
  <img src="{{ site.BaseURL }}/misc/images/SpezielleInformation.png" alt="SpezielleInformation.png"/>
  </p>
